<template>
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header bg-primary">
                    <h5 class="text-white">Edit Organization</h5>
                </div>
                <div class="card-body">
                    <form>
                        <div class="form-row">
                            <div class="form-group col-lg-1">
                                <label class="form-label" for="organizationDescription">Description</label>
                            </div>
                            <div class="form-group col-lg-7">
                                <div><input id="organizationDescription" class="form-control" value.bind="description">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-1">
                                <label class="form-label" for="organizationDetails">Details</label>
                            </div>
                            <div class="form-group col-lg-7">
                                <div>
                                    <textarea id=organizationDetails value.bind="details" style="width: 100%"
                                        rows="5"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-1">
                                <label class="form-label" for="organizationType">Type</label>
                            </div>
                            <div class="form-group">
                                <organization-type-selector id="organizationalType"
                                    selected-type.bind="selectedOrganizationType" exclude-choose-option.bind="true">
                                </organization-type-selector>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-1">
                                <label class="form-label" for="organizationReportingFrequency">Frequency</label>
                            </div>
                            <div class="form-group">
                                <reporting-frequency-selector id="organizationReportingFrequency"
                                    selected-frequency.bind="selectedReportingFrequency"
                                    exclude-choose-option.bind="true">
                                </reporting-frequency-selector>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-1">
                                <label class="form-label"></label>Parent</label>
                            </div>
                            <div class="form-group">
                                <div if.bind="nodatafound" class="my-2">
                                    <h4 class="text-warning">No data found</h4>
                                </div>
                                <div class="table-responsive" if.bind="items.length > 0">
                                    <table class="table table-striped table-hover">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Description</th>
                                                <th>Organization Type</th>
                                                <th>Reporting Frequency</th>
                                                <th>Parent</th>
                                            </tr>
                                        </thead>
                                        <tbody repeat.for="item of items">
                                            <tr
                                                class.bind="selectedOrganization !== undefined && item.id === selectedOrganization.id ? 'bg-info text-white' : ''">
                                                <td style="cursor: pointer"
                                                    click.delegate="$parent.selectOrganization(item)">
                                                    ${item.description}</td>
                                                <td style="cursor: pointer"
                                                    click.delegate="$parent.selectOrganization(item)">
                                                    ${item.organizationType
                                                    | organizationType}</td>
                                                <td style="cursor: pointer"
                                                    click.delegate="$parent.selectOrganization(item)">
                                                    ${item.reportingFrequency
                                                    | reportingFrequency}</td>
                                                <td style="cursor: pointer"
                                                    click.delegate="$parent.selectOrganization(item)">
                                                    ${item.parent.description}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-success" click.delegate="save()"
                            disabled.bind="isUpdatingOrganization">
                            <i class="fas fa-plus" if.bind="!isUpdatingOrganization"></i>
                            <i class="fas fa-spinner fa-spin" if.bind="isUpdatingOrganization"></i> Save
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</template>>